## 简答题

#### 谈谈你是如何理解 JS 异步编程的，EventLoop、消息队列都是做什么的，什么是宏任务，什么是微任务？

**答:**
JavaScript是单线程的，再处理长任务时，会导致效率较慢，所以出现了异步编程。JS加载全部代码，按代码顺序依次执行，同步编程时，必须等当前任务执行完成之后才会执行下一个任务，而异步编程不需要等待当前任务执行完成就可执行下一个编程任务，异步代码会进入消息队列中执行，而不影响同步代码，EventLoop监听调用栈和消息队列，当调用栈中代码执行完成之后，从消息队列中取出第一个任务，压入调用栈中执行，依次类推，直到调用栈和消息队列中没有需要执行的任务，整体代码执行完成。
宏任务即消息队列中的任务，当执行完调用栈的任务后，即会执行消息队列中的第一个宏任务，宏任务中可能回有一部分的异步操作，可以选择作为一个新的宏任务进到队列中排队，也可以作为当前任务的微任务，即当当前任务执行完成之后，会优先执行当前任务的微任务，再去执行其他的宏任务，提高了整体的响应效率。

目前绝大部分异步调用都是作为宏任务执行，Promise&MutationObserver&Node中的process.nextTick会作为微任务在调用末尾执行。